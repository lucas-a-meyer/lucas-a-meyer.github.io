<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lucas A. Meyer">
<meta name="dcterms.date" content="2024-01-17">
<meta name="description" content="Should one start (or finish) a PhD? What are the pros and cons of doing a PhD? What are the alternatives to a PhD?">

<title>Lucas A. Meyer - Is a PhD worth it?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//favicon-32x32.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/iconify-1.0.7/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6KTZ853BN5"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6KTZ853BN5', { 'anonymize_ip': true});
</script>
<!-- Clarity tracking code for https://meyerperin.com/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "cjhrvqb66a");
</script>

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async="" defer="" src="//js.hs-scripts.com/44798468.js"></script>
<!-- End of HubSpot Embed Code -->


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Lucas A. Meyer - Is a PhD worth it?">
<meta property="og:description" content="Should one start (or finish) a PhD? What are the pros and cons of doing a PhD? What are the alternatives to a PhD?">
<meta property="og:image" content="https://www.meyerperin.com/images/phd-holding-book.jpeg">
<meta property="og:site-name" content="Lucas A. Meyer">
<meta name="twitter:title" content="Lucas A. Meyer - Is a PhD worth it?">
<meta name="twitter:description" content="Should one start (or finish) a PhD? What are the pros and cons of doing a PhD? What are the alternatives to a PhD?">
<meta name="twitter:image" content="https://www.meyerperin.com/images/phd-holding-book.jpeg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/mplogo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Lucas A. Meyer</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../reviews.html" rel="" target="">
 <span class="menu-text">Reviews</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../using_quarto/" rel="" target="">
 <span class="menu-text">Using Quarto</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-github-repositories" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">GitHub Repositories</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-github-repositories">    
        <li>
    <a class="dropdown-item" href="https://github.com/lucas-a-meyer/sk-vision-py" rel="" target="">
 <span class="dropdown-text">OpenAI Vision API with the Semantic Kernel</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/lucas-a-meyer/pytly" rel="" target="">
 <span class="dropdown-text">Pytly: Python client for the T.LY link shortener</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://threads.net/@lucas_a_meyer" rel="" target="">
 <span class="menu-text"><iconify-icon inline="" icon="fa6-brands:threads"></iconify-icon></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/lucasameyer" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lucas-a-meyer" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://stackoverflow.com/users/1850561/lucas-a-meyer" rel="" target=""><i class="bi bi-stack-overflow" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#phds-are-vastly-different" id="toc-phds-are-vastly-different" class="nav-link active" data-scroll-target="#phds-are-vastly-different">PhDs are vastly different</a></li>
  <li><a href="#what-is-your-objective" id="toc-what-is-your-objective" class="nav-link" data-scroll-target="#what-is-your-objective">What is your objective?</a></li>
  <li><a href="#can-it-help-me-get-a-job" id="toc-can-it-help-me-get-a-job" class="nav-link" data-scroll-target="#can-it-help-me-get-a-job">Can it help me get a job?</a></li>
  <li><a href="#what-about-the-experience" id="toc-what-about-the-experience" class="nav-link" data-scroll-target="#what-about-the-experience">What about the experience?</a></li>
  <li><a href="#so-should-i-do-a-phd" id="toc-so-should-i-do-a-phd" class="nav-link" data-scroll-target="#so-should-i-do-a-phd">So, should <strong><em>I</em></strong> do a PhD?</a></li>
  </ul>
</nav>
    <div class="quarto-margin-footer"><div class="margin-footer-item">
<div id="mc_embed_shell">
      <link href="//cdn-images.mailchimp.com/embedcode/classic-061523.css" rel="stylesheet" type="text/css">
  <style type="text/css">
        #mc_embed_signup{background:#fff; false;clear:left; font:14px Helvetica,Arial,sans-serif;}
        /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
           We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
    <form action="https://meyerperin.us21.list-manage.com/subscribe/post?u=9284b6c4ce7faadafc83dc82c&amp;id=b106a34e6f&amp;f_id=0073f2e6f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
        <div id="mc_embed_signup_scroll"><h3>Subscribe<br>to new posts</h3>
            <div class="mc-field-group"><label for="mce-EMAIL">Email Address <span class="asterisk">*</span></label><input type="email" name="EMAIL" class="required email" id="mce-EMAIL" required="" value=""><span id="mce-EMAIL-HELPERTEXT" class="helper_text"></span></div>
        <div id="mce-responses" class="clear foot">
            <div class="response" id="mce-error-response" style="display: none;"></div>
            <div class="response" id="mce-success-response" style="display: none;"></div>
        </div>
    <div aria-hidden="true" style="position: absolute; left: -5000px;">
        /* real people should not fill this in and expect good things - do not remove this or risk form bot signups */
        <input type="text" name="b_9284b6c4ce7faadafc83dc82c_b106a34e6f" tabindex="-1" value="">
    </div>
        <div class="optionalParent">
            <div class="clear foot">
                <input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button" value="Subscribe"> <br>
                <p style="margin: 0px auto;"><a href="http://eepurl.com/iHvm3M" title="Mailchimp - email marketing made easy and fun"><!-- <span style="display: inline-block; background-color: transparent; border-radius: 4px;"><img class="refferal_badge" src="https://digitalasset.intuit.com/render/content/dam/intuit/mc-fe/en_us/images/intuit-mc-rewards-text-dark.svg" alt="Intuit Mailchimp" style="width: 220px; height: 40px; display: flex; padding: 2px 0px; justify-content: left; align-items: left;"></span>--></a></p>
            </div>
        </div>
    </div>
</form>
</div>
<script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj = jQuery.noConflict(true);</script></div>

</div></div></div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Is a PhD worth it?</h1>
</div>

<div>
  <div class="description">
    Should one start (or finish) a PhD? What are the pros and cons of doing a PhD? What are the alternatives to a PhD?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lucas A. Meyer </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 17, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<article data-clarity-region="article">
<p>“Is a PhD worth it?” is a question that I get quite a lot on LinkedIn.</p>
<p>If you do an online search or ask ChatGPT about it, you will get a lot of answers, but most people find those answers unsatisfactory. A lot of the problem is with the question, as it’s a little bit like asking whether “is it worth it to travel to Seattle?” It depends on you, on the timing, and on your objectives. Most of the text below is about the experience from a PhD in the US, but some of it is applicable to other countries.</p>
<section id="phds-are-vastly-different" class="level2">
<h2 class="anchored" data-anchor-id="phds-are-vastly-different">PhDs are vastly different</h2>
<p>Although there are some similarities between PhD fields, in practice the careers in different fields are vastly different. The differences are not only between fields, but also between countries, universities, departments, and even supervisors. Someone’s experience with a PhD in English is going to be vastly different from someone’s experience with a PhD in Finance or Accounting. The supply and demand for professionals in different fields varies a lot. Therefore, when you are looking for opinions, it’s important to talk to people that at least have done a PhD in a similar subject as you are considering. Different subjects can be thought as completely different careers. Asking an English PhD about a PhD in Finance is like asking a poet about a career in accounting.</p>
<p>Some fields have a robust market in the industry, but for some others, the market is mostly limited to academia. For example, PhDs in Finance, Accounting, Economics, Statistics, Computer Science, and Engineering have a robust market in the industry. On the other hand, the industry market for PhDs in English, History, and Philosophy is very limited. This is not to say that there are no jobs, or that the PhD won’t be helpful to get a specific job, but that the PhD is usually not a requirement for industry jobs in these subjects and it’s unlikely to help in the average case. In addition, some careers are more careful about admitting PhD students, and only admit a small number that will be employable later (that tends to be the case with Finance and Accounting). Some other fields admit as many students as possible, which can cause the market to become oversupplied.</p>
</section>
<section id="what-is-your-objective" class="level2">
<h2 class="anchored" data-anchor-id="what-is-your-objective">What is your objective?</h2>
<p>If you worked with me on anything, you know that this is a question you hear a lot from me. You need to know what you’re trying to accomplish before you can be helped.</p>
<p>If you want to work as a researcher in a research university, you need a PhD, and usually a PhD from a well-regarded university. For most other cases, a PhD is not a hard requirement. There are some positions in large companies that require it, usually research positions, and there are some positions for which it is strongly desired. In some cases, requirements make little sense: I’ve seen someone with a Ph.D.&nbsp;in Philosophy from a mid-tier university get an interview for a software development position that required a PhD, but another person with a Master’s in Computer Science from a top university not get an interview for the same position because they didn’t have a PhD, even though the person without the PhD had a lot of experience in the subject and in the area. These cases are uncommon. One example of an industry position that often requires PhDs is the Applied Scientist position at Amazon, although if I recall correctly, it’s not a hard requirement for all teams.</p>
<p>If you don’t want to work in a position that requires a PhD, your question is probably about the overall value of the PhD, as in “is it worth the investment?” Most PhDs are funded with a stipend that is enough to live on, but it’s not a lot of money. This makes getting a PhD a substantial investment — depending on your career, you will be forfeiting 4-6 years of salary, and you will be spending a lot of time and effort. The starting salary of a Computer Science graduate in the West Coast is easily over $100,000, so you are looking at a $400,000 to $600,000 investment in forfeited salary alone, and there’s no guarantee that having a Ph.D.&nbsp;will substantially improve your salary later. For science careers with a solid industry market, the PhD is more likely to make a difference in your salary after the initial investment than in other fields. For a long career in these fields, it’s likely to pay off, but not guaranteed. For fields with a weaker market, a PhD is unlikely to pay off financially. Also, doing a PhD outside of your career is unlikely to help you get a job. For example, if you are planning to work as a software engineer and want to do a PhD in English before you start your career, you are probably going to be better off financially if you don’t do the PhD. It may still be worth it for you for the learning experience.</p>
<p>If want to do it because you really love to learn… well, maybe that’s a good reason. PhDs in top universities are very rigorous, and you will learn a lot. I have to say that after doing it, you will feel that you know <em>less</em> than before you started it, but at least you are going to be pretty sure about what you know well and what you don’t. You get lots of skills: you will learn to research rigorously, you will improve your presentation skills, you will learn how to learn, you will get project management skills, but those are skills that you can get elsewhere while being paid.</p>
</section>
<section id="can-it-help-me-get-a-job" class="level2">
<h2 class="anchored" data-anchor-id="can-it-help-me-get-a-job">Can it help me get a job?</h2>
<p>As it’s common with most answers… it depends. Let’s do a multiverse analysis. Assume that there are two versions of you. Both just finished a Computer Science degree at a prestigious university. One of them will go to work in a well-recognized tech company for five years, the other version will go for a PhD in Computer Science at a prestigious university for five years. Five years later, both apply for a non-research software engineering position. Besides having more money, the engineering version of you has more experience and it’s more likely to get the job. On the other hand, if five years later both of you apply for a research position in a tech company, the PhD version of you is more likely to get the job. Only the research version of you can apply for a tenure-track Assistant Professor position. Ten years after finishing school, the software engineer version is likely to have more wealth.</p>
</section>
<section id="what-about-the-experience" class="level2">
<h2 class="anchored" data-anchor-id="what-about-the-experience">What about the experience?</h2>
<p>For most people in research institutions, the experience is very hard. It’s a lot of work, and it’s very stressful. It’s not uncommon to have to work 60-80 hours a week. There’s a lot to learn and a lot of work to do in a short amount of time, and your work will be evaluated at the highest level. You need to improve the overall human body of knowledge, and a lot of dedicated people have been working on it for a while before you started, so it’s supposed to be hard. You need to find something that you enjoy doing hours on end and researching very deeply. You need to be able to self-motivate. For some careers, a lot of the experience is about recovering from failure, as a successful researcher has many papers rejected. Most people who start a PhD are good students that are used to success, and it’s a very different experience to have to deal with failure.</p>
<p>Therefore, it’s not something that most people would recommend for the experience alone.</p>
<p>For people in non-research institutions that get the title without having to publish new research at top tier journals, the experience tends to be a lot better, but the applicability of the degree also tends to be a lot lower.</p>
</section>
<section id="so-should-i-do-a-phd" class="level2">
<h2 class="anchored" data-anchor-id="so-should-i-do-a-phd">So, should <strong><em>I</em></strong> do a PhD?</h2>
<p>If you want to be a researcher in a top university, it’s kind of the only way. If you are thinking about doing a PhD to make someone else happy, or to get a lot of easy money, my suggestion is that you shouldn’t do it — it’s an uncertain way to make parents happy, or to make a lot of money. For all other cases, the answer is an unsatisfactory <em>“it depends a lot on your particular situation and unlikely that you’ll find the answer in an online article”</em>. You need to look hard into your objectives and talk to some people in both your subject area and the career you plan to pursue afterwards. A PhD is probably one of the major purchases you will do in your whole life, usually as big as a house, so you should invest a lot of time in researching it and making sure it’s the right decision for you. It’s definitely worth your time and money to get information from people that have been through a similar path in order to answer your questions.</p>
</section></article>




</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>